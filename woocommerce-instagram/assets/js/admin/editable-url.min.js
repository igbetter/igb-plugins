!function(n){"use strict";"undefined"!=typeof wc_instagram_editable_url_params&&(n.EditableURL=function(t,i){this.options=n.extend(!0,{},{copied:"Copied!",buttons:{edit:"Edit",save:"Ok",cancel:"Cancel",copy:"Copy URL"}},i),this.$input=n(t),this.$container=n('<div class="wc-instagram-editable-url"></div>'),this.url=this.$input.data("url"),this.value=this.$input.val(),this.editing=!1,this.bindEvents(),this.render()},n.EditableURL.prototype={bindEvents:function(){var i=this;this.$container.on("keypress",'input[type="text"]',function(t){13===t.keyCode&&(t.preventDefault(),i.$container.find(".editable-url-actions .save").trigger("click"))}),this.$container.on("click",".editable-url-actions .edit",function(){i.setEditing(!0)}),this.$container.on("click",".editable-url-actions .copy",function(){wcClearClipboard(),wcSetClipboard(i.getUrl(),n(this))}),this.$container.on("aftercopy",".editable-url-actions .copy",function(){n(this).tipTip({attribute:"data-tip",activation:"focus",fadeIn:50,fadeOut:50,delay:0}).trigger("focus")}),this.$container.on("click",".editable-url-actions .save",function(){var t=i.$container.find("input").val();t!==i.value?i.$input.trigger("wc_instagram_editable_url_change",t):i.setEditing(!1)}),this.$container.on("click",".editable-url-actions .cancel",function(){i.setEditing(!1)}),this.$input.on("change",function(){i.value=n(this).val(),i.setEditing(!1)})},getUrl:function(){return this.value?this.url.replace("{editable}",this.value):""},setEditing:function(t){this.editing=t,this.updateContainerHtml()},render:function(){this.$input.attr("type","hidden"),this.updateContainerHtml(),this.$input.after(this.$container)},updateContainerHtml:function(){var t=this.editing?this.getEditingURLHtml():this.getLinkHtml();t+=this.getActionsHtml(),this.$container.html(t)},getLinkHtml:function(){var t="";return this.value&&(t=this.url.replace("{editable}",'<span class="editable">'+this.value+"</span>")),'<a href="'+this.getUrl()+'" target="_blank">'+t+"</a>"},getEditingURLHtml:function(){var t='<input type="text" value="'+this.value+'" />';return"<code>"+this.url.replace("{editable}","</code>"+t+"<code>")+"</code>"},getActionsHtml:function(){var t=[];return this.editing?(t.push('<button class="save button button-small" type="button">'+this.options.buttons.save+"</button>"),t.push('<button class="cancel button-link" type="button">'+this.options.buttons.cancel+"</button>")):(t.push('<button class="edit button button-small" type="button">'+this.options.buttons.edit+"</button>"),this.value&&t.push('<button class="copy button button-small" type="button" data-tip="'+this.options.copied+'">'+this.options.buttons.copy+"</button>")),'<span class="editable-url-actions">'+t.join("")+"</span>"}},n.fn.wc_instagram_editable_url=function(t){return t=n.extend(!0,{},wc_instagram_editable_url_params,t),this.each(function(){new n.EditableURL(this,t)}),this})}(jQuery);